(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(t,e){},104:function(t,e,n){},114:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),i=n(33),o=n.n(i),c=n(6),s=n(53),u="atpls/session";function l(t){try{var e=JSON.stringify(t);localStorage.setItem(u,e)}catch(n){console.log("Error saving state",n)}}void 0!==typeof window&&(window.resetLocalStorage=function(){return l({})});var d="[session] SET_AUDIOSET",f=function(t){return{type:d,audioset:t}},h="[session] PRESS_PAD",p=function(t){return{type:h,clipId:t}},v="[session] RELEASE_PAD",m=function(t){return{type:v,clipId:t}},g="[session] SET_AUDIO_CLIP_STATUS",y="[session] SET_AUDIO_STATUS",b=function(t,e){return{type:y,status:{isPlaying:t,time:e}}},k="[session] AUDIO_STOP_ALL",x=function(){return{type:k}},E="[session] CHANGE_TRACK_VOLUME",w=n(23),C=n.n(w),O=C()(),j="START_VISUALS",V="STOP_VISUALS";O.on("*",function(t,e){"action"!==t&&console.log("event",t,e)});var z=function(t){return function(t){return function(e){t(e),O.emit("action",e)}}},M=n(10),A=n(54),P=null;var I=n(11),S=n(5),T={isPlaying:!1,status:{}};var R={playing:{},volumes:{}},H=function(t,e){return t?t.tracks.reduce(function(t,n){return t[n.id]=e,t},{}):{}};var L=Object(M.c)({audioset:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;return e.type===d?e.audioset:t},audio:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return Object(S.a)({},t,{isPlaying:e.status.isPlaying,time:e.status.time});case g:return Object(S.a)({},t,{status:Object(S.a)({},t.status,Object(I.a)({},e.clipId,e.status))});case k:return Object(S.a)({},t,{status:{}});default:return t}},tracks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:return{playing:H(e.audioset,0),volumes:H(e.audioset,75)};case g:var n=e.trackId,r=e.status.isPlaying?1:-1;return Object(S.a)({},t,{playing:Object(S.a)({},t.playing,Object(I.a)({},n,t.playing[n]+r))});case E:return Object(S.a)({},t,{volumes:Object(S.a)({},t.volumes,Object(I.a)({},e.trackId,e.value))});default:return t}}});var N=null;var _={init:function(t){if(N)throw Error("Session only can be initialized once");var e=(N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(M.e)(L,t,Object(M.d)(Object(M.a)(z,A.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(t){return t}))}(t)).dispatch;return{events:O,store:N,getAudioset:function(){return N.getState().audioset},dispatch:e}},events:O},U=n(8),D=n(9),F=(n(55),[]);function B(t,e){return t.startsWith("audioset://")&&console.log("save",t,e),F[t]=e,e}function G(t){return F[t]}function W(t){return void 0!==F[t]}function J(t,e,n){var r="audioset://".concat(t.id,"/").concat(e);return W(r)?G(r):B(r,n())}function X(t,e){return W(t)?Promise.resolve(G(t)):(console.log("Fetch",t),fetch(t).then(e).then(function(e){return B(t,e)}))}var q=n(24),K=n.n(q),Q="production";var Y=function(t,e){return n=function(t){var e=t.resources||{};return Object.assign({},e.default,e[Q])}(t)[e]||"",function(t){return n&&n.replace("{{filename}}",t)};var n},Z={getCachedResources:function(t,e){return J(t,e,function(){var n={},r=Object.keys(t.clips);return Promise.all(nt(t,e,r).map(function(t,e){return t.then(function(t){return n[r[e]]=t,t})})),n})},loadResources:nt,getResourceUrls:$};function $(t,e){var n=Object.keys(t.clips),r=Y(t,e);return n.reduce(function(t,e){return t[e]=r(e),t},{})}var tt=function(t){return t},et={audio:function(t){var e=K()();return t.arrayBuffer().then(function(t){return e.decodeAudioData(t)})}};function nt(t,e,n){n=n||Object.keys(t.clips);var r=Y(t,e),a=et[e]||tt;return n.map(function(t){return X(r(t),a)})}var rt=K()(),at=1;function it(t,e,n){return t+function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:at;if(!e)return 0;var a=n/(60*r),i=t-e;return 0===i?0:(1-i*a%1)/a}(t,e,n)}var ot=function(){function t(e,n){Object(U.a)(this,t),this.bpm=e.audio.bpm||120,this.playing=0,this.startedAt=null,this.audioset=e,this.buffers={},this.sources={},this.dispatch=n,this.output=function(t){var e=rt.createGain();return e.gain.value=t,e.connect(rt.destination),e}(.2)}return Object(D.a)(t,[{key:"play",value:function(t,e){e=e||it(rt.currentTime,this.startedAt,this.bpm);var n=this.buffers[t];n||console.warn("No buffer",t),this.stopTrack(t,e);var r=this.sources[t]=rt.createBufferSource();r.buffer=n,r.loop=!0,r.connect(this.output),r.start(e),this.started(t,e)}},{key:"stop",value:function(t,e){var n=this.sources[t];n&&(e=e||rt.currentTime,n.stop(e),this.sources[t]=null,this.stopped(t,e))}},{key:"stopTrack",value:function(t,e){var n=this,r=this.audioset.clips[t];this.audioset.tracks.find(function(t){return t.id===r.trackId}).clipIds.forEach(function(t){return n.stop(t,e)})}},{key:"stopAll",value:function(){var t=this,e=rt.currentTime;Object.keys(this.sources).forEach(function(n){return t.stop(n,e)})}},{key:"started",value:function(t,e){0===this.playing&&(this.startedAt=e,this.dispatch(b(!0,e))),this.playing++;var n=this.audioset.clips[t].trackId;this.dispatch(function(t,e,n){return{type:g,clipId:t,trackId:e,status:{isPlaying:!0,time:n}}}(t,n,rt.currentTime))}},{key:"stopped",value:function(t,e){var n=this.audioset.clips[t].trackId;this.dispatch(function(t,e,n){return{type:g,clipId:t,trackId:e,status:{isPlaying:!1,time:n}}}(t,n,rt.currentTime)),this.playing--,0===this.playing&&(this.startedAt=null,this.dispatch(b(!1,e)))}}]),t}();var ct={},st=function(t,e){var n=t.id;return ct[n]?ct[n]:(ct[n]=new ot(t,e),ct[n])},ut=null;function lt(t,e){t&&((ut=st(t,e)).buffers=Z.getCachedResources(t,"audio"))}var dt={connect:function(t){var e=t.events,n=t.store,r=n.getState();r.audioset&&lt(r.audioset,n.dispatch),function(t,e,n){n.dispatch(x())}(0,0,n),e.on("action",function(t){var e=t.type;e===d?lt(t.audioset,n.dispatch):e===h?function(t,e){if(!ut)return console.warn("NO sampler!");ut.play(t)}(t.clipId):e===v?function(t,e){if(!ut)return console.warn("NO sampler!");ut.stop(t)}(t.clipId):e===k&&ut.stopAll()})}},ft=n(12),ht=n(4),pt=n(59),vt=n(58),mt=8,gt=2;function yt(t){return t/450}function bt(t){return t/50}function kt(t){return t/mt}function xt(t){var e=yt(t),n=bt(t);return kt(t)+e+2*n}function Et(t,e){return e*kt(t)+gt}function wt(t,e){return Ct(e.offsetWidth,e.offsetHeight,t)}function Ct(t,e,n){var r=t/e;return{screenWidth:r<n?t:e*n,screenHeight:r<n?t/n:e}}var Ot={sixteenNinths:16/9,sixteenTenths:1.6};var jt=36,Vt=ht.g().range([0,360]).domain([0,jt]);function zt(t,e,n,r,a){var i=a.duration,o=a.trackVolume,c=a.trackColor,s=t.append("g").attr("class","circleGroup").attr("transform","translate(".concat(n,", ").concat(r,")")),u=s.append("g").attr("class","circle"),l=ht.a(),d=function(t,e,n){return ht.f(t).map(function(r,a){return{startAngle:Mt(Vt(r)),endAngle:Mt(Vt(a===t-1?r+1:r+2)),innerRadius:0,outerRadius:e/30*n*2}})}(jt,e,o);u.selectAll(".outerArcs").data(d).enter().append("path").attr("class","outerArcs").attr("d",l).style("fill",c).style("opacity",function(t,e){return.3/jt*e});var f=function(t,e,n){return ht.f(t).map(function(r,a){return{startAngle:Mt(Vt(r)),endAngle:Mt(Vt(a===t-1?r+1:r+2)),innerRadius:0,outerRadius:e/30*n}})}(jt,e,o);u.selectAll(".innerArcs").data(f).enter().append("path").attr("class","innerArcs").attr("d",l).style("fill",c).style("opacity",function(t,e){return 1/jt*e}),u.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",-(e/30*o+e/350)).style("stroke",c).style("stroke-width",1.5);var h=ht.j(function(t){var e=t/1e3%i,n=ht.g().range([1,0]).domain([0,i]);u.style("transform","rotate(".concat(-n(e),"turn)")),ht.h(".circle").empty()&&h.stop()});return s}function Mt(t){return t*(Math.PI/180)}var At=n(56);var Pt="/app/audiosets",It=function(t){return t.json()};function St(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pt;return X("".concat(e,"/").concat(t,".audioset.json"),It)}function Tt(t,e){var n=t.clips[e];if(n){var r=function(t,e){return J(t,"coverUrls",function(){return $(t,"covers")})[e]}(t,n.name),a=t.meta.bpm||120;return{lnglat:n.lnglat,year:n.year,country:n.country,title:n.title,artist:n.artist,album:n.album,trackNumber:n.trackNum,loopend:1,trackVolume:n.audio.trackVolume||.7,duration:60*n.audio.beats/a,imageUrl:r,trackColor:n.display.color}}}var Rt={geoMapUrl:"https://unpkg.com/world-atlas@1.1.4/world/110m.json",imprint:!1,focus:{lambda:-10,verticalShift:15,scaleFactor:1}},Ht=function(){function t(e,n){Object(U.a)(this,t),this.config=Object.assign({},Rt,e.visuals),this.set=e,this.element=n,this.el=ht.h(n),this.circles={},this.albums={},this.refLines={},this.infos={},this.fixedAspectRatio=Ot.sixteenTenths}return Object(D.a)(t,[{key:"setGeodata",value:function(t){this.geodata=t,this.countries=pt.a(t,t.objects.countries).features,this.render()}},{key:"show",value:function(t){var e=Tt(this.set,t);if(e){var n=wt(this.fixedAspectRatio,this.element),r=n.screenWidth,a=n.screenHeight,i=this.projection(e.lnglat),o=Object(ft.a)(i,2),c=o[0],s=o[1],u=zt(this.circlesContainer,r,c,s,e);this.circles[t]=u;var l=function(t,e,n){var r=n.trackNumber,a=n.imageUrl,i=n.year,o=n.country,c=n.trackColor,s=t.append("g"),u=kt(e),l=function(t){return t/300}(e),d=yt(e),f=Et(e,r),h=bt(e);return s.append("svg:image").attr("width",u).attr("height",u).attr("x",r*u).attr("y",0).style("stroke","white").attr("xlink:href",a),s.append("rect").attr("width",u).attr("height",h).attr("x",r*u).attr("y",u+d).style("fill",c),function(t,e){for(var n=document.getElementById(e).getBBox().width,r=t.text();n>u-2*l&&r.length>0;)r=r.slice(0,-1),t.text(r+"..."),n=document.getElementById(e).getBBox().width}(s.append("text").attr("id","countryText"+r).attr("x",r*u+l).attr("y",u+d+h/2).attr("dy","0.35em").style("font-size","1.1vw").text(o),"countryText"+r),s.append("circle").attr("cx",f).attr("cy",u+d+2*h).attr("r",gt).style("fill",c),s.append("text").attr("x",r*u+l).attr("y",u+d+1.5*h).attr("dy","0.35em").style("font-size","1.1vw").style("fill",c).text(i),s}(this.albumsContainer,r,e);this.albums[t]=l;var d=function(t,e,n,r,a,i){var o=Et(e,a),c=n,s=r,u=Math.sqrt(Math.pow(c-o,2)+Math.pow(s-0,2)),l=u/10,d=Math.acos((s-0)/u),f=[{x:o,y:0},{x:o+(c-o)/2+l*Math.cos(Math.PI-d),y:0+(s-0)/2+l*Math.sin(Math.PI-d)},{x:c,y:s}],h=ht.e().x(function(t){return t.x}).y(function(t){return t.y}).curve(ht.b);return t.append("path").datum(f).attr("d",h).style("stroke",i).style("stroke-dasharray","2, 3").style("fill","none").style("stroke-width",2)}(this.refLinesContainer,r,c,s,e.trackNumber,e.trackColor);this.refLines[t]=d,function(t,e,n,r,a,i){var o=Math.floor(e/30*i),c=ht.f(o,150),s=t.append("circle").attr("cx",n).attr("cy",r).attr("r",0).style("fill","none").style("stroke",a);c.forEach(function(t,e){var n=2-2*t/150;s.transition().duration(20).delay(20*e).attr("r",t).style("stroke-width",n).on("end",function(e,n,r){149===t&&r[n].remove()})})}(this.wavesContainer,r,c,s,e.trackColor,e.trackVolume);var f,h=function(t,e,n,r){var a=r.title,i=r.artist,o=r.album,c=r.trackColor;t.select("#lastSampleInfoGroup").remove();var s=t.append("g").attr("id","lastSampleInfoGroup"),u=e/20,l=e/190,d=u/3,f=e-u,h=n-xt(e)-u,p="-0.35em";return s.append("rect").attr("width",u).attr("height",u).attr("x",f).attr("y",h).style("fill",c),s.append("text").attr("x",f+l).attr("y",h+1*d).attr("dy",p).attr("font-size","1.1vw").text("title"),s.append("text").attr("x",f-l).attr("y",h+1*d).attr("dy",p).attr("font-size","1.1vw").style("text-anchor","end").style("fill","#e6e6e6").text(a),s.append("text").attr("x",f+l).attr("y",h+2*d).attr("dy",p).attr("font-size","1.1vw").text("artist"),s.append("text").attr("x",f-l).attr("y",h+2*d).attr("dy",p).attr("font-size","1.1vw").style("text-anchor","end").style("fill","#e6e6e6").text(i),s.append("text").attr("x",f+l).attr("y",h+3*d).attr("dy",p).attr("font-size","1.1vw").text("album"),s.append("text").attr("x",f-l).attr("y",h+3*d).attr("dy",p).attr("font-size","1.1vw").style("text-anchor","end").style("fill","#e6e6e6").text(o),s}(this.lastSampleInfoContainer,r,a,e);this.infos[t]=h,this.config.imprint&&(f=e.lnglat,e.trackColor,ht.i(".countries").each(function(t){if(ht.c(t,f)){var e=ht.h("#country".concat(t.id)).style("fill");ht.h("#country".concat(t.id)).style("fill",At(e).brighten(.2))}}))}}},{key:"hide",value:function(t){var e=this.circles[t];e&&(e.remove(),this.circles[t]=null);var n=this.albums[t];n&&(n.remove(),this.albums[t]=null);var r=this.refLines[t];r&&(r.remove(),this.refLines[t]=null);var a=this.infos[t];a&&(a.remove(),this.infos[t]=null)}},{key:"clear",value:function(){this.el.selectAll("*").remove()}},{key:"render",value:function(){var t,e,n=wt(this.fixedAspectRatio,this.element),r=n.screenWidth,a=n.screenHeight,i=(t=this.fixedAspectRatio,e=r,t===Ot.sixteenTenths?e/5.9:e/6.5)*this.config.focus.scaleFactor,o=this.config.focus.lambda,c=this.config.focus.verticalShift,s=xt(r);this.clear();var u=this.el.append("svg").attr("id","svgMap").attr("width",r).attr("height",a);if(this.mapContainer=u.append("g").attr("transform","translate(0, ".concat(s,")")).append("g").attr("id","map"),this.albumsContainer=u.append("g").attr("id","albums"),this.refLinesContainer=u.append("g").attr("id","refLines").attr("transform","translate(0, ".concat(s,")")),this.circlesContainer=u.append("g").attr("transform","translate(0, ".concat(s,")")).append("g").attr("id","circles"),this.wavesContainer=u.append("g").attr("id","waves").attr("transform","translate(0, ".concat(s,")")),this.lastSampleInfoContainer=u.append("g").attr("id","lastSampleInfo").attr("transform","translate(0, ".concat(s,")")),this.geodata){this.projection=function(t,e,n,r,a){return vt.a().scale(n).translate([t/2,e/2+e/r]).rotate([a,0,0])}(r,a-s,i,c,o);var l=ht.d().projection(this.projection);this.mapContainer.selectAll(".countries").data(this.countries).enter().append("path").attr("id",function(t){return"country".concat(t.id)}).attr("class","countries").attr("d",l).style("stroke","#2c2c2c").style("stroke-width",.5).style("fill",function(t){return"010"===t.id?"none":"#888888"})}}}]),t}(),Lt={connect:function(t){var e,n=t.events;n.on(j,function(t){var n=t.audioset,r=t.el;e=function(t,e){var n=new Ht(t,e);return n.resize=function(){return n.render()},window.addEventListener("resize",n.resize),n.render(),fetch(t.visuals.geoMapUrl).then(function(t){return t.json()}).then(function(t){return n.setGeodata(t)}),n}(n,r),Z.loadResources(n,"covers")}),n.on(V,function(){e&&e.resize&&window.removeEventListener("resize",e.resize)}),n.on("action",function(t){t.type===g&&(t.status.isPlaying?e.show(t.clipId):e.hide(t.clipId))})}};var Nt=n(3),_t=n.n(Nt),Ut={stop:"M6 6h12v12H6z",fly:"M17.218,2.268L2.477,8.388C2.13,8.535,2.164,9.05,2.542,9.134L9.33,10.67l1.535,6.787c0.083,0.377,0.602,0.415,0.745,0.065l6.123-14.74C17.866,2.46,17.539,2.134,17.218,2.268 M3.92,8.641l11.772-4.89L9.535,9.909L3.92,8.641z M11.358,16.078l-1.268-5.613l6.157-6.157L11.358,16.078z",mute:"M18.084,11.639c0.168,0.169,0.168,0.442,0,0.611c-0.084,0.084-0.195,0.127-0.306,0.127c-0.111,0-0.221-0.043-0.306-0.127l-1.639-1.639l-1.639,1.639c-0.084,0.084-0.195,0.127-0.306,0.127c-0.111,0-0.222-0.043-0.307-0.127c-0.168-0.169-0.168-0.442,0-0.611L15.223,10l-1.64-1.639c-0.168-0.168-0.168-0.442,0-0.61c0.17-0.169,0.442-0.169,0.612,0l1.639,1.639l1.639-1.639c0.169-0.169,0.442-0.169,0.611,0c0.168,0.168,0.168,0.442,0,0.61L16.445,10L18.084,11.639z M12.161,2.654v14.691c0,0.175-0.105,0.333-0.267,0.4c-0.054,0.021-0.109,0.032-0.166,0.032c-0.111,0-0.223-0.043-0.305-0.127l-3.979-3.979H2.222c-0.237,0-0.432-0.194-0.432-0.432V6.759c0-0.237,0.195-0.432,0.432-0.432h5.222l3.979-3.978c0.123-0.125,0.309-0.163,0.471-0.095C12.056,2.322,12.161,2.479,12.161,2.654 M7.192,7.192H2.654v5.617h4.538V7.192z M11.296,3.698l-3.24,3.241v6.123l3.24,3.24V3.698z",cinema:"M18.175,4.142H1.951C1.703,4.142,1.5,4.344,1.5,4.592v10.816c0,0.247,0.203,0.45,0.451,0.45h16.224c0.247,0,0.45-0.203,0.45-0.45V4.592C18.625,4.344,18.422,4.142,18.175,4.142 M4.655,14.957H2.401v-1.803h2.253V14.957zM4.655,12.254H2.401v-1.803h2.253V12.254z M4.655,9.549H2.401V7.747h2.253V9.549z M4.655,6.846H2.401V5.043h2.253V6.846zM14.569,14.957H5.556V5.043h9.013V14.957z M17.724,14.957h-2.253v-1.803h2.253V14.957z M17.724,12.254h-2.253v-1.803h2.253V12.254zM17.724,9.549h-2.253V7.747h2.253V9.549z M17.724,6.846h-2.253V5.043h2.253V6.846z",controls:"M6.176,7.241V6.78c0-0.221-0.181-0.402-0.402-0.402c-0.221,0-0.403,0.181-0.403,0.402v0.461C4.79,7.416,4.365,7.955,4.365,8.591c0,0.636,0.424,1.175,1.006,1.35v3.278c0,0.222,0.182,0.402,0.403,0.402c0.222,0,0.402-0.181,0.402-0.402V9.941c0.582-0.175,1.006-0.714,1.006-1.35C7.183,7.955,6.758,7.416,6.176,7.241 M5.774,9.195c-0.332,0-0.604-0.272-0.604-0.604c0-0.332,0.272-0.604,0.604-0.604c0.332,0,0.604,0.272,0.604,0.604C6.377,8.923,6.105,9.195,5.774,9.195 M10.402,10.058V6.78c0-0.221-0.181-0.402-0.402-0.402c-0.222,0-0.402,0.181-0.402,0.402v3.278c-0.582,0.175-1.006,0.714-1.006,1.35c0,0.637,0.424,1.175,1.006,1.351v0.461c0,0.222,0.181,0.402,0.402,0.402c0.221,0,0.402-0.181,0.402-0.402v-0.461c0.582-0.176,1.006-0.714,1.006-1.351C11.408,10.772,10.984,10.233,10.402,10.058M10,12.013c-0.333,0-0.604-0.272-0.604-0.604S9.667,10.805,10,10.805c0.332,0,0.604,0.271,0.604,0.604S10.332,12.013,10,12.013M14.629,8.448V6.78c0-0.221-0.182-0.402-0.403-0.402c-0.221,0-0.402,0.181-0.402,0.402v1.668c-0.581,0.175-1.006,0.714-1.006,1.35c0,0.636,0.425,1.176,1.006,1.351v2.07c0,0.222,0.182,0.402,0.402,0.402c0.222,0,0.403-0.181,0.403-0.402v-2.07c0.581-0.175,1.006-0.715,1.006-1.351C15.635,9.163,15.21,8.624,14.629,8.448 M14.226,10.402c-0.331,0-0.604-0.272-0.604-0.604c0-0.332,0.272-0.604,0.604-0.604c0.332,0,0.604,0.272,0.604,0.604C14.83,10.13,14.558,10.402,14.226,10.402 M17.647,3.962H2.353c-0.221,0-0.402,0.181-0.402,0.402v11.27c0,0.222,0.181,0.402,0.402,0.402h15.295c0.222,0,0.402-0.181,0.402-0.402V4.365C18.05,4.144,17.869,3.962,17.647,3.962 M17.245,15.232H2.755V4.768h14.49V15.232z",stop2:"M10 0c-5.523 0-10 4.477-10 10s4.477 10 10 10 10-4.477 10-10-4.477-10-10-10zM10 18.125c-4.487 0-8.125-3.638-8.125-8.125s3.638-8.125 8.125-8.125 8.125 3.638 8.125 8.125-3.638 8.125-8.125 8.125zM6.25 6.25h7.5v7.5h-7.5z",fullscreen:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z",keyboard:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z",volumeUp:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z",volumeDown:"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z",volumeOff:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"},Dt=function(t){var e=t.icon,n=t.color,r=t.onClick;return a.a.createElement("svg",{fill:n||"#CCC",onClick:r,height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:Ut[e]||e}))},Ft=_t()("button")({color:"black",display:"block",background:"white",font:"inherit",padding:"0 1em",borderRadius:"1em",":hover":{textDecoration:"underline"}}),Bt=_t()("button")({color:"white",display:"block",background:"none",font:"inherit",border:0}),Gt=_t()("div")({}),Wt=_t()("div")({marginTop:"3px",flexGrow:1,textAlign:"center"}),Jt=_t()(function(t){var e=t.className,n=t.audioset,r=t.audio,i=t.onCloseAudioset,o=t.onStopAll,c=(t.onTogglePads,t.onToggleTracks),s=t.onFullscreen;return a.a.createElement("header",{className:e},a.a.createElement("div",null,a.a.createElement(Dt,{icon:"fly",onClick:i})),a.a.createElement(Wt,null,n.meta.title,": ",n.meta.description),a.a.createElement(Gt,null,r.isPlaying?a.a.createElement(Dt,{icon:"stop",onClick:o}):"",a.a.createElement(Dt,{icon:"mute"})),a.a.createElement(Dt,{icon:"controls",onClick:c}),a.a.createElement(Dt,{icon:"cinema",onClick:s}))})({display:"flex",flexDirection:"row",backgroundColor:"black",padding:"2px 10px"}),Xt=n(18),qt=n.n(Xt),Kt=qt()({margin:"0 auto",lineHeight:"2em",fontSize:"14px",backgroundColor:"black","& h1, & h2":{fontWeight:400,margin:"1em 0"}}),Qt=function(t){var e=t.audioset,n=t.audiosetIndex,r=t.onChangeAudioset,i=t.onCloseAudioset;return a.a.createElement("div",{className:Kt},n&&!e&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Empieza una nueva remezcla"),n.map(function(t){return a.a.createElement(Bt,{key:t.id,onClick:function(){return r(t)}},t.meta.title,": ",t.meta.description)})),e&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,e.meta.title),a.a.createElement("p",null,e.meta.description),a.a.createElement(Ft,{onClick:i},"Cerrar audioset")))},Yt=Object(c.b)(function(t){return t},function(t){return{onChangeAudioset:function(e){return t(f(e))}}})(function(t){var e=t.audioset,n=t.onClose,i=t.onChangeAudioset,o=Object(r.useState)(!0),c=Object(ft.a)(o,2),s=(c[0],c[1]),u=Object(r.useState)(null),l=Object(ft.a)(u,2),d=l[0],f=l[1];Object(r.useEffect)(function(){var t=!0;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return X("".concat(t,"/audioset.index.json"),It)}().then(function(e){return t&&f(e)}),function(){return t=!1}},[e]);return a.a.createElement(Qt,{audioset:e,audiosetIndex:d,onChangeAudioset:function(t){s(!0),St(t.id).then(i).then(n)},onCloseAudioset:function(){return i(null)}})}),Zt=_t()(function(t){var e=t.className,n=t.audioset,i=t.events,o=Object(r.useRef)(null);return Object(r.useEffect)(function(){return i.emit(j,{audioset:n,el:o.current}),function(){return i.emit(V)}},[n]),a.a.createElement("div",{className:e,ref:o})})({backgroundColor:"gray",height:"100%"}),$t=n(60),te=n(57),ee=n(61),ne=(n(104),function(t){function e(t){var n;return Object(U.a)(this,e),(n=Object($t.a)(this,Object(te.a)(e).call(this,t))).touched=!1,n}return Object(ee.a)(e,t),Object(D.a)(e,[{key:"handlePress",value:function(t){if(t)this.touched=!0;else if(!0===this.touched)return void(this.touched=!1);var e=!this.props.pressed;this.props[e?"onPress":"onRelease"](this.props.name)}},{key:"render",value:function(){var t=this,e=this.props,n=e.color,r=e.pressed,i=e.touch,o=e.image,c=e.name;return a.a.createElement("button",{className:"Pad ".concat(r?"pressed":""),style:{borderColor:n},onTouchStart:i?function(){return t.handlePress(!0)}:void 0,onMouseDown:function(){return t.handlePress(!1)}},o?a.a.createElement("img",{src:o,alt:c}):"")}}]),e}(a.a.Component)),re=function(t){var e=t.track,n=t.status,r=t.onPadPressed,i=t.onPadReleased;return a.a.createElement("div",null,e.clipIds.map(function(t){return a.a.createElement(ne,{key:t,name:t,pressed:n[t]&&n[t].isPlaying,color:e.color,onPress:r,onRelease:i})}))},ae=_t()(function(t){var e=t.audioset,n=t.status,r=t.className,i=t.onPadPressed,o=t.onPadReleased;return a.a.createElement("div",{className:r},e.tracks.map(function(t){return a.a.createElement(re,{key:t.name,track:t,status:n,onPadPressed:i,onPadReleased:o})}))})({backgroundColor:"black",minWidth:"30em",minHeight:"100%"}),ie=Object(c.b)(function(t){return{audioset:t.audioset,status:t.audio.status}},function(t){return{onPadPressed:function(e){return t(p(e))},onPadReleased:function(e){return t(m(e))}}})(ae),oe=n(7),ce=n.n(oe),se=_t()(function(t){var e=t.onPress,n=t.onRelease,r=t.className,i=t.children;return a.a.createElement("button",{className:r,onMouseDown:e,onMouseUp:n},i)})(function(t){return{border:"2px solid ".concat(t.color),color:t.color,backgroundColor:t.pressed?t.color:"black",marginRight:"0.5em",padding:"1px 3px","&:hover":{backgroundColor:t.color,color:"black"}}});se.propTypes={color:ce.a.string};var ue=se,le=_t()("div")(function(t){return{color:t.color,borderTop:"2px solid ".concat(t.active?t.color:"black"),"> h2":{marginTop:"5px"},marginBottom:"1em"}}),de=qt()({padding:"1em"}),fe=function(t){var e=t.audioset,n=t.volumes,r=t.playing,i=t.status,o=t.onVolumeChanged,c=t.onPress,s=t.onRelease;return a.a.createElement("div",{className:de},a.a.createElement("h2",null,"Tracks"),e.tracks.map(function(t){return a.a.createElement(le,{key:t.id,active:r[t.id],color:t.color},a.a.createElement("h2",null,t.id),a.a.createElement("div",null,t.clipIds.map(function(t){return a.a.createElement(ue,{key:t,pressed:i[t]&&i[t].isPlaying,onPress:function(){return c(t)},onRelease:function(){return s(t)},color:e.clips[t].display.color},t)})),a.a.createElement("input",{type:"range",min:"0",max:"100",value:n[t.id],onChange:function(e){return o(t.id,e.target.value)}}))}))},he=Object(c.b)(function(t){return{audioset:t.audioset,status:t.audio.status,volumes:t.tracks.volumes,playing:t.tracks.playing}},function(t){return{onVolumeChanged:function(e,n){return t({type:E,trackId:e,volume:n})},onPress:function(e){return t(p(e))},onRelease:function(e){return t(m(e))}}})(fe);function pe(t){return J(t,"keyboardMap",function(){return function(t){if(!t)return{};var e=t.defaults,n=t.keyMap;return Object.keys(n).reduce(function(t,r){var a=Object(S.a)({},e,n[r]);return a.key=r,t[r]=a,t[r.toUpperCase()]=a,t[a.clipId]=a,t},{})}(t.keyboard)})}var ve={connect:function(t){var e={};window.onkeydown=function(n){var r=n.key;if(!e[r]){e[r]=!0;var a=pe(t.getAudioset())[r];a&&t.dispatch(p(a.clipId))}},window.onkeyup=function(n){var r=n.key;e[r]=!1;var a=pe(t.getAudioset())[r];a&&t.dispatch(m(a.clipId))}}},me=_t()(ue)(function(t){return{marginRight:"0.5em",padding:"1px 3px"}}),ge=_t()(function(t){var e=t.audioset,n=t.status,r=t.className,i=t.onPress,o=t.onRelease,c=pe(e);return a.a.createElement("div",{className:r},e.tracks.map(function(t){return t.clipIds.map(function(e){return a.a.createElement(me,{key:e,pressed:n[e]&&n[e].isPlaying,color:t.color,onPress:function(){return i(e)},onRelease:function(){return o(e)}},c[e]?c[e].key.toUpperCase():"-")})}))})({backgroundColor:"black",textAlign:"center",padding:"2px 10px 4px 10px"}),ye=Object(c.b)(function(t){return{audioset:t.audioset,status:t.audio.status}},function(t){return{onPress:function(e){return t(p(e))},onRelease:function(e){return t(m(e))}}})(ge),be=n(25),ke=n.n(be),xe=n(13),Ee={changeFullscreen:function(t){xe.enabled&&(t?xe.request():xe.exit())},onChange:function(t){xe.enabled&&xe.on("change",function(){return t(xe.isFullscreen)})}};var we=function(t){return{type:"welcome",isVisible:t}};function Ce(t,e){switch(console.log("joder",t,e),e.type){case"welcome":return Object(S.a)({},t,{welcomeVisible:e.isVisible});case"fullscreen":return Object(S.a)({},t,{isFullscreen:e.isFullscreen});case"pads":return Object(S.a)({},t,{padsVisible:e.isVisible});case"tracks":return Object(S.a)({},t,{tracksVisible:e.isVisible});default:return t}}var Oe={overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)"},content:{position:"fixed",maxHeight:"calc(100% - 100px)",top:"50%",left:"50%",transform:"translate(-50%, -50%)",border:"",background:"black",borderRadius:0}},je=_t()("div")({display:"flex",flexDirection:"column",minHeight:"100vh"}),Ve=_t()("div")({display:"flex",flexGrow:1,flexDirection:"row",height:"100%",minHeight:"100%",maxHeight:"100%",overflow:"hidden"}),ze=_t()("div")({flexGrow:1}),Me=function(t){var e=t.audioset,n=t.events,i=t.dispatch,o=Object(r.useReducer)(Ce,function(t){return{isFullscreen:!1,welcomeVisible:!t,padsVisible:!1,tracksVisible:!0}}(e)),c=Object(ft.a)(o,2),s=c[0],u=c[1],l=function(){return u(we(!1))};Object(r.useEffect)(function(){return Ee.onChange(function(t){return u(function(t){return{type:"fullscreen",isFullscreen:t}}(t))})},[i]);var d=!s.isFullscreen;return a.a.createElement(a.a.Fragment,null,e&&a.a.createElement(je,{className:"App"},d&&a.a.createElement(Jt,{audioset:e,audio:{},onCloseAudioset:function(){return u(we(!0))},onTogglePads:function(){return u({type:"pads",isVisible:!s.padsVisible})},onToggleTracks:function(){return u({type:"tracks",isVisible:!s.tracksVisible})},onFullscreen:function(){return Ee.changeFullscreen(!s.isFullscreen)}}),a.a.createElement(Ve,null,d&&s.padsVisible&&a.a.createElement(ie,null),a.a.createElement(ze,null,a.a.createElement(Zt,{audioset:e,events:n})),d&&s.tracksVisible&&a.a.createElement(he,null)),d&&a.a.createElement(ye,null)),a.a.createElement(ke.a,{isOpen:!e||s.welcomeVisible,shouldCloseOnOverlayClick:!0,onRequestClose:l,style:Oe},a.a.createElement(Yt,{onClose:l})))},Ae=Object(c.b)(function(t){return{audioset:t.audioset}})(Me),Pe=function(t){var e=t.events;return a.a.createElement(Ae,{events:e})},Ie=_.init(function(){try{var t=localStorage.getItem(u);if(null===t)return;return JSON.parse(t)}catch(e){return}}());!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.subscribe(Object(s.throttle)(function(){l(t.getState())},e))}(Ie.store),ve.connect(Ie),dt.connect(Ie),Lt.connect(Ie);var Se=Ie.getAudioset();Se&&Ie.dispatch(f(Se));var Te=document.getElementById("app");ke.a.setAppElement(Te),o.a.render(a.a.createElement(c.a,{store:Ie.store},a.a.createElement(Pe,{events:Ie.events})),Te)},62:function(t,e,n){t.exports=n(114)}},[[62,2,1]]]);
//# sourceMappingURL=main.4b9e90c9.chunk.js.map